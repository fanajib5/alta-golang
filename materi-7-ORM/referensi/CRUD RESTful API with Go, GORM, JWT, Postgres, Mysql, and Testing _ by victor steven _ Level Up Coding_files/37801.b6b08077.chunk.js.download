(self.webpackChunklite=self.webpackChunklite||[]).push([[37801],{84033:(e,t,n)=>{"use strict";n.d(t,{MA:()=>l,Zh:()=>u,jM:()=>c});var o=n(63038),r=n.n(o),i=n(67294),s={mutedAuthorIds:[],setMutedAuthorIds:function(){},mutedPubIds:[],setMutedPubIds:function(){},dismissedPostIds:[],setDismissedPostIds:function(){},isMutingFromHomeFeed:!0,seeLessPostIds:[],setSeeLessPostIds:function(){}},l=function(e,t,n,o,r){return e.filter((function(e){var i,s,l,d,u,c;return!(t.indexOf(null===(i=e.post)||void 0===i||null===(s=i.creator)||void 0===s?void 0:s.id)>-1||n.indexOf(null===(l=e.post)||void 0===l||null===(d=l.collection)||void 0===d?void 0:d.id)>-1||o.indexOf(null===(u=e.post)||void 0===u?void 0:u.id)>-1||r.indexOf(null===(c=e.post)||void 0===c?void 0:c.id)>-1)}))},d=i.createContext(s),u=function(e){var t=e.children,n=i.useState(s.mutedAuthorIds),o=r()(n,2),l=o[0],u=o[1],c=i.useState(s.mutedPubIds),a=r()(c,2),m=a[0],v=a[1],p=i.useState(s.dismissedPostIds),f=r()(p,2),I=f[0],E=f[1],h=i.useState(s.seeLessPostIds),P=r()(h,2),g=P[0],w=P[1],b=s.isMutingFromHomeFeed;return i.createElement(d.Provider,{value:{mutedAuthorIds:l,setMutedAuthorIds:u,mutedPubIds:m,setMutedPubIds:v,dismissedPostIds:I,setDismissedPostIds:E,isMutingFromHomeFeed:b,seeLessPostIds:g,setSeeLessPostIds:w}},t)},c=function(){return i.useContext(d)}},37801:(e,t,n)=>{"use strict";n.d(t,{t:()=>Z});var o=n(67294),r=n(60519),i=n(76532),s=n(73891),l=n(68421),d=n(19464),u=n(14391),c=n(319),a=n.n(c),m=n(59713),v=n.n(m),p=n(63038),f=n.n(p),I=n(5977),E=n(84033),h=n(97292),P=n(30570),g=n(36511),w=n(32262),b=n(29169),x=n(42933),S=n(82318),k=n(80362),M=n(95760),A=n(51512),O=n(85277),y=n(8403),j=n(67297),F=n(93394);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var D=o.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),L=o.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const U=function(e){return o.createElement("svg",C({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),D,L)};var B=n(46829),_=n(64235),H=n(32589),K=function(e){var t=e.creatorId,n=e.viewerId,r=e.muteAuthor,i=e.hidePopover,s=e.eventData,l=e.isActiveExpandedPost,d=(0,A.pK)(),u=(0,M.Av)(),c={id:t||""},m=(0,H.Pd)(c).viewerEdge,v=!(null==m||!m.isFollowing),p=!(null==m||!m.isMuting),h=(0,P.sK)().clearExpandedState,g=(0,I.k6)(),b=(0,E.jM)(),x=b.mutedAuthorIds,k=b.setMutedAuthorIds,O=b.isMutingFromHomeFeed,y=o.useCallback((function(e){k([].concat(a()(x),[e]))}),[x]),j=(0,B.useMutation)(_.g,{variables:{targetUserId:t||""},optimisticResponse:{unfollowUser:{__typename:"User",id:t||"",viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isFollowing:!1}}}}),F=f()(j,1)[0];return t?v?o.createElement(w.Sl,null,o.createElement(S.r,{onClick:function(){u.event("user.unfollowed",{targetUserId:t,source:d}),F(),i()}},"Unfollow this author")):p?null:o.createElement(w.Sl,null,o.createElement(S.r,{onClick:function(){u.event("user.muted",s),r(),O&&(y(t),l&&(h(),g.goBack())),i()}},"Mute this author")):null},R=n(84783),T=function(e){var t=e.collectionId,n=e.viewerId,r=e.hidePopover,i=e.mutePub,l=e.eventData,d=e.isActiveExpandedPost,u=(0,M.Av)(),c=(0,A.pK)(),m={id:t||""},v=(0,s.gY)(m).viewerEdge,p=!(null==v||!v.isFollowing),f=!(null==v||!v.isMuting),h=(0,R.MT)(t||"",n),g=(0,E.jM)(),b=g.mutedPubIds,x=g.setMutedPubIds,k=g.isMutingFromHomeFeed,O=(0,P.sK)().clearExpandedState,y=(0,I.k6)(),j=o.useCallback((function(e){x([].concat(a()(b),[e]))}),[b]);return t?p?o.createElement(w.Sl,null,o.createElement(S.r,{onClick:function(){u.event("collection.unfollowed",{collectionId:t,followSource:c}),h(),r()}},"Unfollow this publication")):f?null:o.createElement(w.Sl,null,o.createElement(S.r,{onClick:function(){u.event("collection.muted",l),i(),k&&(j(t),d&&(O(),y.goBack())),r()}},"Mute this publication")):null};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.postId,n=e.creatorId,r=e.collectionId,i=e.isActiveExpandedPost,s=e.setDismissedPostId,l=(0,g.r)().viewerId,d=o.useState(!1),u=f()(d,2),c=u[0],m=u[1],v=(0,h.l)(n,r),p=v.muteAuthor,C=v.mutePub,D=(0,P.sK)().clearExpandedState,L=(0,I.k6)(),B=(0,E.jM)(),_=B.seeLessPostIds,H=B.setSeeLessPostIds,R=B.isMutingFromHomeFeed,G=(0,O.w)(),V=(0,M.Av)(),Z=(0,A.pK)(),z=(0,y.PM)(),W=(0,j.v9)((function(e){return e.navigation.referrer})),Y=(0,j.v9)((function(e){return e.navigation.currentLocation})),J={postId:t,location:Y,referrer:W,source:Z,referrerSource:z},X=o.useRef(null),q=function(){null!==X.current&&window.clearTimeout(X.current)},Q=function(){X.current=window.setTimeout((function(){V.event("post.see_less",N({userId:l,collection:r},J))}),5e3),R&&(H([].concat(a()(_),[t])),i&&(D(),L.goBack()),s&&s(t)),G({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:q}}),m(!1)},$=o.useCallback((function(){return o.createElement(w.mX,null,o.createElement(x.x,{borderBottom:"BASE_LIGHTER",paddingBottom:"4px",marginBottom:"4px"},o.createElement(w.Sl,null,o.createElement(S.r,{onClick:Q,ariaLabel:"Show less like this"},o.createElement(x.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},o.createElement(x.x,{marginRight:"4px"},o.createElement(U,null)),o.createElement(x.x,null,"Show less like this"))))),o.createElement(K,{creatorId:n,viewerId:l,muteAuthor:p,isActiveExpandedPost:i,hidePopover:function(){return m(!1)},eventData:N({targetUserId:n},J)}),r&&o.createElement(T,{collectionId:r,viewerId:l,mutePub:C,isActiveExpandedPost:i,hidePopover:function(){return m(!1)},eventData:N({collection:r},J)}),o.createElement(b.z,{postId:t,viewerId:l,targetUserId:n||"",shouldShowShortenedCopy:!0,hidePopover:function(){return m(!1)}}))}),[c,_]);return n?o.createElement(k.J,{isVisible:c,hide:function(){return m(!1)},popoverRenderFn:$},o.createElement(S.r,{onClick:function(){return m(!0)},ariaLabel:"More options"},o.createElement(F.Z,null))):null},Z=function(e){var t=e.post,n=e.index,c=e.isActiveExpandedPost,a=e.setDismissedPostId,m=t.creator,v=t.collection,p=(0,i.H)().value,f=(0,s.gY)(v).viewerEdge,I=!(null==f||!f.isEditor),E=(null==p?void 0:p.id)===(null==m?void 0:m.id);return m?I||E?o.createElement(d.B,null,(function(e){var n=e.show;return o.createElement(r.Z,{post:t,creator:m,collection:v,showLoadingIndicator:n})})):0===n?o.createElement(l.o,{flag:u.T3.USER_SIGNAL_MENU,text:"Improve your recommendations by telling us which stories you're not interested in.",dismissText:"OK",placement:"top"},o.createElement(V,{postId:t.id,creatorId:m.id,collectionId:null==v?void 0:v.id,isActiveExpandedPost:c,setDismissedPostId:a})):o.createElement(V,{postId:t.id,creatorId:m.id,collectionId:null==v?void 0:v.id,isActiveExpandedPost:c,setDismissedPostId:a}):null}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/37801.b6b08077.chunk.js.map